(()=>{function e(e){if(!e||0===e.length)return;const o=e.map((e=>e.toLowerCase())),t=[],r=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null,!1);let n;for(;n=r.nextNode();)t.push(n);t.forEach((e=>{const t=e.parentNode;if("SCRIPT"===t.nodeName||"STYLE"===t.nodeName||"NOSCRIPT"===t.nodeName||"none"===getComputedStyle(t).display)return;const r=e.nodeValue,n=r.toLowerCase();if(o.some((e=>n.includes(e)))){const o=document.createElement("span");o.className="spoiler-blocked",o.style.backgroundColor="#222",o.style.color="#222",o.style.padding="2px 4px",o.style.borderRadius="3px",o.style.cursor="pointer",o.textContent=r,o.title="Click to reveal spoiler",o.addEventListener("click",(function(){this.style.backgroundColor="transparent",this.style.color="inherit"})),t.replaceChild(o,e)}}))}chrome.runtime.sendMessage({action:"getKeywords"},(o=>{o&&o.keywords&&e(o.keywords)})),new MutationObserver((o=>{chrome.runtime.sendMessage({action:"getKeywords"},(o=>{o&&o.keywords&&e(o.keywords)}))})).observe(document.body,{childList:!0,subtree:!0})})();